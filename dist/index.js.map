{"version":3,"file":"index.js","sourceRoot":"","sources":["../lib/index.ts"],"names":[],"mappings":"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","sourcesContent":["/* eslint-disable no-underscore-dangle */\nconst TOPLEVEL_KEYS = [\n  // vue\n  'attrs',\n  'class',\n  'directives',\n  'domProps',\n  'hook',\n  'keepAlive',\n  'key',\n  'nativeOn',\n  'on',\n  'props',\n  'ref',\n  'refInFor',\n  'scopedSlot',\n  'show',\n  'slot',\n  'staticClass',\n  'staticStyle',\n  'style',\n  'transition',\n\n  // vue-router\n  'registerRouteInstance',\n  'routerView',\n  'routerViewDepth',\n]\n\nconst NESTABLE_PREFIXES = ['domProps', 'on', 'nativeOn', 'hook']\nconst DIRECTIVE_PREFIX = 'v-'\nconst XLINK_PREFIX = 'xlink'\nconst PASSIVE_SUFFIX = '-passive'\n\nfunction startsWith(haystack: string, needle: string): boolean {\n  return haystack.slice(0, needle.length) === needle\n}\n\nfunction endsWith(haystack: string, needle: string): boolean {\n  return haystack.slice(-needle.length) === needle\n}\n\nfunction isTop(key: string): boolean {\n  return TOPLEVEL_KEYS.includes(key)\n}\n\nfunction isNestable(key: string): string | null {\n  return (\n    NESTABLE_PREFIXES.find((prefix) => {\n      return startsWith(key, prefix)\n    }) || null\n  )\n}\n\nfunction isDirective(key: string): boolean {\n  return startsWith(key, DIRECTIVE_PREFIX)\n}\n\nfunction isXLink(key: string): boolean {\n  return startsWith(key, XLINK_PREFIX)\n}\n\nfunction classifyKeys(props: any): any {\n  return Object.keys(props).reduce(\n    (acc, key) => {\n      if (isTop(key)) {\n        acc.top.push(key)\n      } else if (isNestable(key)) {\n        acc.nestable.push(key)\n      } else if (isDirective(key)) {\n        acc.directive.push(key)\n      } else if (isXLink(key)) {\n        acc.xlink.push(key)\n      } else {\n        acc.attribute.push(key)\n      }\n      return acc\n    },\n    {top: [], nestable: [], directive: [], xlink: [], attribute: []}\n  )\n}\n\nfunction processTopLevel(props: any, keys: string[], output: any = {}): any {\n  return keys.reduce((acc: any, key) => {\n    acc[key] = props[key]\n    return acc\n  }, output)\n}\n\nfunction parseNestableKey(key: string): any {\n  const prefix = isNestable(key)\n  let suffix = key.slice(prefix.length)\n  const firstChar = suffix.charAt(0).toLowerCase()\n  const rest = suffix.slice(1)\n  suffix = firstChar === '-' ? rest : `${firstChar}${rest}`\n\n  if (prefix === 'on' && endsWith(suffix, PASSIVE_SUFFIX)) {\n    suffix = `&${suffix.slice(0, PASSIVE_SUFFIX.length)}`\n  }\n\n  return {topKey: prefix, key: suffix}\n}\n\nfunction processNestable(props: any, keys: string[], output: any = {}): any {\n  return keys.reduce((acc: any, rawKey) => {\n    const {topKey, key} = parseNestableKey(rawKey)\n    acc[topKey] = acc[topKey] || {}\n    acc[topKey][key] = props[rawKey]\n    return acc\n  }, output)\n}\n\nfunction processDirectives(props: any, keys: string[], output: any = {}): any {\n  return keys.reduce((acc: any, key) => {\n    const name = key.slice(DIRECTIVE_PREFIX.length)\n    output.directives = output.directives || []\n    output.directives.push({\n      name: name,\n      value: props[key],\n    })\n    return acc\n  }, output)\n}\n\nfunction processXLinks(props: any, keys: string[], output: any = {}): any {\n  return keys.reduce((acc: any, key) => {\n    const attr = key.slice(XLINK_PREFIX.length).toLowerCase()\n    const xlink = `xlink:${attr}`\n    acc.attrs = acc.attrs || {}\n    acc.attrs[xlink] = props[key]\n    return acc\n  }, output)\n}\n\nfunction processAttributes(props: any, keys: string[], output: any = {}): any {\n  return keys.reduce((acc: any, key) => {\n    acc.attrs = acc.attrs || {}\n    acc.attrs[key] = props[key]\n    return acc\n  }, output)\n}\n\nconst acceptValue = ['input', 'textarea', 'option', 'select']\nfunction mustUseDomProps(tag: string, type: string, attr: string): boolean {\n  return (\n    (attr === 'value' && acceptValue.includes(tag) && type !== 'button') ||\n    (attr === 'selected' && tag === 'option') ||\n    (attr === 'checked' && tag === 'input') ||\n    (attr === 'muted' && tag === 'video')\n  )\n}\n\nfunction getVNodeData(tag: string, data: any): any {\n  const props = Object.keys(data).reduce((acc: any, key) => {\n    const value = data[key]\n    const type = data['type']\n    if (mustUseDomProps(tag, type, key)) {\n      acc[`domProps-${key}`] = value\n    } else {\n      acc[key] = value\n    }\n    return acc\n  }, {})\n\n  const keys = classifyKeys(props)\n\n  let output = processTopLevel(props, keys.top)\n  output = processNestable(props, keys.nestable, output)\n  output = processDirectives(props, keys.directive, output)\n  output = processXLinks(props, keys.xlink, output)\n  output = processAttributes(props, keys.attribute, output)\n\n  return output\n}\n\nfunction createElement(\n  $createElement: any,\n  tag: string,\n  data: any,\n  children: any[]\n): any {\n  if (!data) {\n    return $createElement(tag, data, children)\n  }\n\n  const options = getVNodeData(tag, data)\n  return $createElement(tag, options, children)\n}\n\nexport function install(Vue: any): void {\n  const _render = Vue.prototype._render\n  Vue.prototype._render = function() {\n    if (!this._tsx) {\n      this._tsx = true\n\n      const $createElement = this.$createElement\n      this.$createElement = (tag: string, data: any, ...children: any[]) => {\n        return createElement(\n          $createElement,\n          tag,\n          data,\n          children.length ? children : undefined\n        )\n      }\n    }\n\n    return _render.call(this)\n  }\n}\n\nexport default {\n  install,\n}\n"]}