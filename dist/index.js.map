{"version":3,"file":"index.js","sourceRoot":"","sources":["../lib/index.ts"],"names":[],"mappings":"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","sourcesContent":["/* eslint-disable no-underscore-dangle */\nconst isTopLevelKey = [\n  // vue\n  'attrs',\n  'class',\n  'directives',\n  'domProps',\n  'hook',\n  'keepAlive',\n  'key',\n  'nativeOn',\n  'on',\n  'props',\n  'ref',\n  'refInFor',\n  'scopedSlot',\n  'show',\n  'slot',\n  'staticClass',\n  'staticStyle',\n  'style',\n  'transition',\n\n  // vue-router\n  'registerRouteInstance',\n  'routerView',\n  'routerViewDepth',\n]\n\nconst isNestableKey = /^(domProps|on|nativeOn|hook)([\\-_A-Z])/\nconst isDirectiveKey = /^v-/\nconst isXlinkKey = /^xlink([A-Z])/\n\nfunction classifyKeys(keys: string[]): any {\n  return keys.reduce(\n    (acc, key) => {\n      if (isTopLevelKey.indexOf(key) !== -1) {\n        acc.top.push(key)\n      } else if (key.match(isNestableKey) !== null) {\n        acc.nestable.push(key)\n      } else if (key.match(isDirectiveKey) !== null) {\n        acc.directive.push(key)\n      } else if (key.match(isXlinkKey) !== null) {\n        acc.xlink.push(key)\n      } else {\n        acc.attribute.push(key)\n      }\n\n      return acc\n    },\n    {top: [], nestable: [], directive: [], xlink: [], attribute: []}\n  )\n}\n\nfunction getTopLevel(props: any, keys: string[]): any {\n  return keys.reduce((acc: any, key) => {\n    acc[key] = props[key]\n    return acc\n  }, {})\n}\n\nfunction getNestableTopLevelKeyAndKey(key: string): any {\n  const matches = key.match(isNestableKey)\n\n  const prefix = matches[1]\n  let suffix = key.replace(isNestableKey, (_, _$1, $2) => {\n    return $2 === '-' ? '' : $2.toLowerCase()\n  })\n\n  if (prefix === 'on') {\n    // TODO: with .endsWith\n    const passiveMatches = suffix.match(/^(.+)-passive/)\n    if (passiveMatches) {\n      suffix = `&${passiveMatches[1]}`\n    }\n  }\n\n  return {topLevelKey: prefix, key: suffix}\n}\n\nfunction getNestable(props: any, keys: string[]): any {\n  return keys.reduce((acc: any, key) => {\n    const keys = getNestableTopLevelKeyAndKey(key)\n\n    if (keys === null) {\n      return acc\n    }\n\n    acc[keys.topLevelKey] = acc[keys.topLevelKey] || {}\n    acc[keys.topLevelKey][keys.key] = props[key]\n\n    return acc\n  }, {})\n}\n\nfunction getDirectives(props: any, keys: string[]): any {\n  const directives = keys.reduce((acc: any, key) => {\n    const name = key.replace(isDirectiveKey, '')\n    acc.push({\n      name: name,\n      value: props[key],\n    })\n    return acc\n  }, [])\n\n  return {directives: directives}\n}\n\nfunction getXLinks(props: any, keys: string[]): any {\n  const xlinks = keys.reduce((acc: any, key) => {\n    const xlinkKey = key.replace(isXlinkKey, (_m, p1) => {\n      return `xlink:${p1.toLowerCase()}`\n    })\n    acc[xlinkKey] = props[key]\n    return acc\n  }, {})\n\n  return {attrs: xlinks}\n}\n\nfunction getAttributes(props: any, keys: string[]): any {\n  const attributes = keys.reduce((acc: any, key) => {\n    acc[key] = props[key]\n    return acc\n  }, {})\n\n  return {attrs: attributes}\n}\n\nconst acceptValue = ['input', 'textarea', 'option', 'select']\nfunction mustUseDomProps(tag: string, type: string, attr: string): boolean {\n  return (\n    (attr === 'value' && acceptValue.includes(tag) && type !== 'button') ||\n    (attr === 'selected' && tag === 'option') ||\n    (attr === 'checked' && tag === 'input') ||\n    (attr === 'muted' && tag === 'video')\n  )\n}\n\nfunction getVNodeData(tag: string, data: any): any {\n  const props = Object.keys(data).reduce((acc: any, key) => {\n    const value = data[key]\n    const type = data['type']\n    if (mustUseDomProps(tag, type, key)) {\n      acc[`domProps-${key}`] = value\n    } else {\n      acc[key] = value\n    }\n    return acc\n  }, {})\n\n  let keys = Object.keys(props)\n  const classifiedKeys = classifyKeys(keys)\n\n  const topLevel = getTopLevel(props, classifiedKeys.top)\n  const nestable = getNestable(props, classifiedKeys.nestable)\n  const directives = getDirectives(props, classifiedKeys.directive)\n  const xlinks = getXLinks(props, classifiedKeys.xlink)\n  const attributes = getAttributes(props, classifiedKeys.attribute)\n\n  return Object.assign({}, topLevel, nestable, directives, {\n    attrs: Object.assign({}, xlinks.attrs, attributes.attrs),\n  })\n}\n\nfunction createElement(\n  $createElement: any,\n  tag: string,\n  data: any,\n  children: any[]\n): any {\n  if (!data) {\n    return $createElement(tag, data, children)\n  }\n\n  const options = getVNodeData(tag, data)\n  return $createElement(tag, options, children)\n}\n\nexport function install(Vue: any): void {\n  const _render = Vue.prototype._render\n  Vue.prototype._render = function() {\n    if (!this._tsx) {\n      this._tsx = true\n\n      const $createElement = this.$createElement\n      this.$createElement = (tag: string, data: any, ...children: any[]) => {\n        return createElement(\n          $createElement,\n          tag,\n          data,\n          children.length ? children : undefined\n        )\n      }\n    }\n\n    return _render.call(this)\n  }\n}\n\nexport default {\n  install,\n}\n"]}